<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 이 공간에 있는 쿼리문들을 호출할 때 이름의 시작 -->
<mapper namespace="qna">


	<!-- 문의 리스트 -->
	<select id="getQnAList" resultType="QnAVO">
	
		<![CDATA[
		
			  SELECT
				    a.qna_no AS qnaNo,
				    a.customer_no AS customerNo,
				    a.board_type AS boardType,
				    a.title,
				    a.content,
				    a.reg_date AS regDate,
				    a.hit,
				    b.content AS adminContent,
				    b.reg_date AS adminRegDate
				FROM
				    qna a
				    LEFT OUTER JOIN qna_comment b ON a.qna_no = b.qna_no
				ORDER BY
				    a.qna_no DESC
		
		]]>

	</select>

	<!-- 문의 등록 -->
	<insert id="insertQnA" parameterType="QnAVO">
		
		<![CDATA[
		
			INSERT INTO qna (
							 qna_no ,
							 customer_no ,
							 board_type ,
							 title ,
							 content
							 )
					 VALUES (
							 seq_qna_no.NEXTVAL ,
							 #{customerNo} ,
							 #{boardType} ,
							 #{title} ,
							 #{content}
							 )		
		
		]]>

	</insert>

	<!-- 문의 삭제 -->
	<delete id="deleteQnA" parameterType="QnAVO">
	
		<![CDATA[
		
			DELETE FROM qna WHERE qna_no = #{qnANo} 	
		
		]]>

	</delete>

	<!-- 문의 답글 삭제 -->
	<delete id="deleteQnAComment" parameterType="QnAVO">
	
		<![CDATA[
		
			DELETE FROM qna_comment WHERE qna_no = #{qnANo} 	
		
		]]>

	</delete>

	<!-- 관리자 문의 등록 -->
	<insert id="insertQnAAdmin" parameterType="QnAVO">
		
		<![CDATA[
		
			INSERT INTO qna_comment (
							 QNA_NO ,
						 	 CONTENT ,
						 	 REG_DATE							 
							 )
					 VALUES (
							 #{qnANo},
							 #{content},
							 sysdate
							 )		
		
		]]>

	</insert>


</mapper>




